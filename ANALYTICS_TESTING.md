# Тестирование Analytics Events

## Проблема
В Google Analytics не отображаются кастомные события (звонки, WhatsApp клики, отправка форм).

## Исправления
1. **Исправлены параметры GA4** - убраны неподдерживаемые параметры `event_category`, `event_label`
2. **Улучшено отслеживание форм** - теперь отслеживаются все формы на странице
3. **Добавлено подробное логирование** - для отладки в консоли браузера
4. **Добавлены тестовые функции** - для ручного тестирования

## Как протестировать

### 1. Проверка инициализации
Откройте консоль браузера и проверьте:
```javascript
console.log(window.analyticsTracker);
```

Должно показать объект AnalyticsTracker с параметрами:
- `gtagLoaded: true`
- `ymLoaded: true/false`
- `ymId: "ID"`

### 2. Ручное тестирование событий
В консоли браузера выполните:
```javascript
// Тест всех событий
window.testAnalytics();

// Или отдельные события
window.trackEvent('test_phone_call', {
    category: 'Contact',
    label: '+1234567890',
    custom1: 'phone_click',
    custom2: '+1234567890'
});
```

### 3. Проверка в реальном времени
1. Откройте Google Analytics
2. Перейдите в "Отчеты" → "Отчеты в реальном времени" → "События"
3. Выполните действия на сайте (клик по телефону, WhatsApp, отправка формы)
4. Проверьте, появляются ли события в реальном времени

### 4. Проверка в консоли браузера
При выполнении действий на сайте в консоли должны появляться логи:
- "Phone call detected: ..."
- "WhatsApp click detected: ..."
- "Form submitted: ..."
- "CTA button clicked: ..."
- "Analytics Event Sent: ..."

## Ожидаемые события в GA4

### События контактов
- `phone_call` - клики по телефонным номерам
- `whatsapp_click` - клики по WhatsApp ссылкам

### События форм
- `contact_form_submitted` - отправка контактных форм
- `review_form_submitted` - отправка форм отзывов
- `order_form_submitted` - отправка форм заказов

### События взаимодействий
- `service_cta_clicked` - клики по кнопкам CTA
- `gallery_image_view` - просмотры изображений в галерее
- `navigation_click` - клики по навигации

### События страниц
- `service_page_view` - просмотры страниц услуг
- `page_loaded` - загрузка страниц

### Тестовые события
- `analytics_test` - тестовое событие при загрузке
- `test_*` - события для ручного тестирования

## Время появления данных
- **Реальное время**: 1-5 минут
- **Стандартные отчеты**: 24-48 часов
- **Пользовательские отчеты**: до 72 часов

## Устранение неполадок

### Если события не появляются:
1. Проверьте, загружен ли gtag в консоли: `typeof gtag`
2. Проверьте инициализацию: `window.analyticsTracker`
3. Проверьте логи в консоли браузера
4. Убедитесь, что нет блокировщиков рекламы

### Если gtag не загружен:
1. Проверьте код Google Analytics в `<head>`
2. Убедитесь, что ID GA4 указан правильно
3. Проверьте, нет ли ошибок загрузки скрипта

### Если события есть в реальном времени, но нет в отчетах:
1. Подождите 24-48 часов
2. Проверьте настройки событий в GA4
3. Убедитесь, что события не помечены как исключения 